<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /home/robatics/workspaces/ros2_ws_training2.bis/install/isaacsim_rviz_training/share/isaacsim_rviz_training/description/urdf/spacelab_robot.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="spacelab_robot">
  <!-- Material definition. These materials will be used for vizualisation in RVIZ -->
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <material name="blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>
  <material name="green">
    <color rgba="0.0 0.8 0.0 1.0"/>
  </material>
  <material name="grey">
    <color rgba="0.2 0.2 0.2 1.0"/>
  </material>
  <material name="orange">
    <color rgba="1.0 0.4235294117647059 0.0392156862745098 1.0"/>
  </material>
  <material name="brown">
    <color rgba="0.8705882352941177 0.8117647058823529 0.7647058823529411 1.0"/>
  </material>
  <material name="red">
    <color rgba="0.8 0.0 0.0 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <!-- Used for fixing robot to the world -->
  <link name="world"/>
  <!-- This first joint is fixed and link the world and the link_1 -->
  <joint name="joint_world_1" type="fixed">
    <parent link="world"/>
    <child link="link_1"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.5"/>
  </joint>
  <!-- Definition of the baselink corresponding to the robot base -->
  <link name="link_1">
    <visual>
      <geometry>
        <!-- it possible to define the absolute path of the model 
        <mesh filename="file:///home/spacefactory/ros2_ws_training/src/${PKG_Name}/description/meshes/Base.dae"/> -->
        <!-- but it's prefered to define the path relatively to the package -->
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Base.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Base.dae"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="4.0"/>
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.0061063308908" ixy="0.0" ixz="0.0" iyy="0.0061063308908" iyz="0.0" izz="0.01125"/>
    </inertial>
  </link>
  <!-- Definition of the 1st joint -->
  <joint name="joint_1_2" type="revolute">
    <parent link="link_1"/>
    <child link="link_2"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.1273"/>
    <axis xyz="0 0 1"/>
    <limit effort="330.0" lower="-3.14159265" upper="3.14159265" velocity="2.16"/>
    <dynamics damping="10.0" friction="10.0"/>
  </joint>
  <!-- Definition of the 1st movable part of the robot -->
  <link name="link_2">
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Shoulder.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Shoulder.dae"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="7.778"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.0314743125769" ixy="0.0" ixz="0.0" iyy="0.0314743125769" iyz="0.0" izz="0.021875625"/>
    </inertial>
  </link>
  <!-- Definition of the 2nd joint -->
  <joint name="joint_2_3" type="revolute">
    <parent link="link_2"/>
    <child link="link_3"/>
    <origin rpy="0.0 1.570796325 0.0" xyz="0.0 0.220941 0.0"/>
    <axis xyz="0 1 0"/>
    <limit effort="330.0" lower="-3.14159265" upper="3.14159265" velocity="2.16"/>
    <dynamics damping="10.0" friction="10.0"/>
  </joint>
  <!-- Definition of the 2nd movable part of the robot -->
  <link name="link_3">
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/UpperArm.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/UpperArm.dae"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="12.93"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.306"/>
      <inertia ixx="0.421753803798" ixy="0.0" ixz="0.0" iyy="0.421753803798" iyz="0.0" izz="0.036365625"/>
    </inertial>
  </link>
  <!-- Definition of the 3rd joint -->
  <joint name="joint_3_4" type="revolute">
    <parent link="link_3"/>
    <child link="link_4"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 -0.1719 0.612"/>
    <axis xyz="0 1 0"/>
    <limit effort="150.0" lower="-3.14159265" upper="3.14159265" velocity="3.15"/>
    <dynamics damping="10.0" friction="10.0"/>
  </joint>
  <!-- Definition of the 3rd movable part of the robot -->
  <link name="link_4">
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Forearm.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Forearm.dae"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="3.87"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.28615"/>
      <inertia ixx="0.111069694097" ixy="0.0" ixz="0.0" iyy="0.111069694097" iyz="0.0" izz="0.010884375"/>
    </inertial>
  </link>
  <!-- Definition of the 4th joint -->
  <joint name="joint_4_5" type="revolute">
    <parent link="link_4"/>
    <child link="link_5"/>
    <origin rpy="0.0 1.570796325 0.0" xyz="0.0 0.0 0.5723"/>
    <axis xyz="0 1 0"/>
    <limit effort="54.0" lower="-3.14159265" upper="3.14159265" velocity="3.2"/>
    <dynamics damping="10.0" friction="10.0"/>
  </joint>
  <!-- Definition of the 4th movable part of the robot -->
  <link name="link_5">
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Wrist1.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Wrist1.dae"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.96"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.0051082479567" ixy="0.0" ixz="0.0" iyy="0.0051082479567" iyz="0.0" izz="0.0055125"/>
    </inertial>
  </link>
  <!-- Definition of the 5th joint -->
  <joint name="joint_5_6" type="revolute">
    <parent link="link_5"/>
    <child link="link_6"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 0.1149 0.0"/>
    <axis xyz="0 0 1"/>
    <limit effort="54.0" lower="-3.14159265" upper="3.14159265" velocity="3.2"/>
    <dynamics damping="10.0" friction="10.0"/>
  </joint>
  <!-- Definition of the 5th movable part of the robot -->
  <link name="link_6">
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Wrist2.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Wrist2.dae"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.96"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.0051082479567" ixy="0.0" ixz="0.0" iyy="0.0051082479567" iyz="0.0" izz="0.0055125"/>
    </inertial>
  </link>
  <!-- Definition of the 6th joint -->
  <joint name="joint_6_7" type="revolute">
    <parent link="link_6"/>
    <child link="link_7"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.1157"/>
    <axis xyz="0 1 0"/>
    <limit effort="54.0" lower="-3.14159265" upper="3.14159265" velocity="3.2"/>
    <dynamics damping="10.0" friction="10.0"/>
  </joint>
  <!-- Definition of the 6th movable part of the robot -->
  <link name="link_7">
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Wrist3.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/Wrist3.dae"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.202"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.000526462289415" ixy="0.0" ixz="0.0" iyy="0.000526462289415" iyz="0.0" izz="0.000568125"/>
    </inertial>
  </link>
  <!-- Specify standard inertial calculations https://en.wikipedia.org/wiki/List_of_moments_of_inertia -->
  <!-- These make use of xacro's mathematical functionality -->
  <!-- z size of the end effector fingers -->
  <!-- Definition of the end effector joint that is fixed -->
  <joint name="joint_7_EE" type="fixed">
    <parent link="link_7"/>
    <child link="link_EE"/>
    <!-- Use the EE position parameter -->
    <origin rpy="0 0 3.141592" xyz="0.0 0.0845 0.0"/>
  </joint>
  <!-- Definition of the end effector link that is fixed -->
  <link name="link_EE">
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/END_EFFECTOR.dae"/>
      </geometry>
    </visual>
    <collision>
      <!-- <origin xyz="0.0 0.0 0.0" rpy="1.5708 0.0 0.0"  /> -->
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/END_EFFECTOR.dae"/>
      </geometry>
    </collision>
    <!-- <inertial>
      <origin xyz="0 0 0"/>
      <mass value="${EE_mass}"/>
      <inertia ixx="0.003" ixy="0" ixz="0"
          iyy="0.003" iyz="0"
          izz="0.009"/>
    </inertial> -->
  </link>
  <!-- Define the end effector gripper left finger -->
  <link name="link_Lgripper">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="1.3541666666666668e-05" ixy="0.0" ixz="0.0" iyy="4.166666666666667e-06" iyz="0.0" izz="1.1041666666666668e-05"/>
    </inertial>
    <!-- <inertial>
      <mass value="0.1"/>
      <origin xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial> -->
    <collision>
      <origin rpy="0 0 0" xyz="0.025 -0.238 0.0"/>
      <geometry>
        <box size="0.01 0.035 0.02"/>
      </geometry>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="0.025 -0.238 0.0"/>
      <geometry>
        <box size="0.01 0.035 0.02"/>
      </geometry>
      <material name="grey">
        <color rgba="0.2 0.2 0.2 1"/>
      </material>
    </visual>
  </link>
  <!-- Define the prismatic joint between the end effector and the left finger -->
  <joint name="joint_EE_Lgripper" type="prismatic">
    <parent link="link_EE"/>
    <child link="link_Lgripper"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="1 0 0"/>
    <limit effort="500" lower="-0.02" upper="0.0" velocity="0.05"/>
    <dynamics damping="60.0" friction="4.0"/>
  </joint>
  <!-- Define the end effector gripper right finger -->
  <link name="link_Rgripper">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="1.3541666666666668e-05" ixy="0.0" ixz="0.0" iyy="4.166666666666667e-06" iyz="0.0" izz="1.1041666666666668e-05"/>
    </inertial>
    <!-- No inertia for links that are fixed otherwise error -->
    <!-- <inertial>
      <mass value="0.1"/>
      <origin xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial> -->
    <collision>
      <origin rpy="0 0 0" xyz="-0.025 -0.238 0.0"/>
      <geometry>
        <box size="0.01 0.035 0.02"/>
      </geometry>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="-0.025 -0.238 0.0"/>
      <geometry>
        <box size="0.01 0.035 0.02"/>
      </geometry>
      <material name="grey">
        <color rgba="0.2 0.2 0.2 1"/>
      </material>
    </visual>
  </link>
  <!-- Define the prismatic joint between the end effector and the right finger -->
  <joint name="joint_EE_Rgripper" type="prismatic">
    <parent link="link_EE"/>
    <child link="link_Rgripper"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="1 0 0"/>
    <limit effort="500" lower="0.0" upper="0.02" velocity="0.05"/>
    <dynamics damping="60.0" friction="4.0"/>
  </joint>
  <!-- Definition of the lidar joint -->
  <joint name="joint_world_lidar" type="fixed">
    <origin rpy="3.141592 0.0 3.141592" xyz="0.8 0.0 1.4"/>
    <parent link="world"/>
    <child link="link_lidar"/>
  </joint>
  <!-- Definition of the lidar link that will be used to position the 3D shape -->
  <link name="link_lidar">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="1.0"/>
      <inertia ixx="0.003" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.009"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/LIDAR.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/LIDAR.dae"/>
      </geometry>
    </collision>
  </link>
  <!-- Definition of additional lidar joint that will be used to position the lidar focal-->
  <joint name="joint_lidar_laser" type="fixed">
    <origin rpy="0.0 -1.570796 0.0" xyz="0.0 0.0 0.0"/>
    <parent link="link_lidar"/>
    <child link="link_laser"/>
  </joint>
  <link name="link_laser">
    </link>
  <!-- Definition of the lidar as a ray sensor inside gazebo -->
  <gazebo reference="link_laser">
    <sensor name="lidar_3d" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <visualize>false</visualize>
      <update_rate>10</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>50</samples>
            <resolution>1</resolution>
            <min_angle>-0.2</min_angle>
            <max_angle>0.2</max_angle>
          </horizontal>
          <vertical>
            <samples>50</samples>
            <resolution>1</resolution>
            <min_angle>-0.2</min_angle>
            <max_angle>0.2</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.3</min>
          <max>10.0</max>
          <resolution>0.001</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.0</stddev>
        </noise>
      </ray>
      <!-- Gazebo requires the velodyne_gazebo_plugins package to simulate the interfaces of the LIDAR-->
      <plugin filename="libgazebo_ros_lidar_3d.so" name="gazebo_ros_laser_controller">
        <topicName>/lidar_3d_points</topicName>
        <frameName>link_laser</frameName>
        <min_range>0.3</min_range>
        <max_range>10.0</max_range>
        <gaussianNoise>0.0005</gaussianNoise>
      </plugin>
    </sensor>
  </gazebo>
  <!-- Definition of the camera joint -->
  <joint name="joint_EE_cam3D" type="fixed">
    <axis xyz="0 1 0"/>
    <origin rpy="0 0 0" xyz="0 -0.025 0.09"/>
    <parent link="link_EE"/>
    <child link="link_cam3D"/>
  </joint>
  <!-- Definition of the camera link that will be used to position the 3D shape -->
  <link name="link_cam3D">
    <collision>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/CAMERA.dae"/>
      </geometry>
    </collision>
    <visual>
      <geometry>
        <mesh filename="package://isaacsim_rviz_training/description/meshes/CAMERA.dae"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="1e-5"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
  </link>
  <!-- Definition of additional camera joint that will be used to position the camera sensor-->
  <joint name="joint_cam3D_camSensor" type="fixed">
    <axis xyz="0 1 0"/>
    <origin rpy="0 0 -1.570796" xyz="0 -0.05 0"/>
    <parent link="link_cam3D"/>
    <child link="link_camSensor"/>
  </joint>
  <link name="link_camSensor">
  </link>
  <!-- Definition of additional camera joint that will be used to position the camera focal-->
  <joint name="joint_camSensor_camFocale" type="fixed">
    <origin rpy="-1.570796 0 -1.570796" xyz="0 0 0"/>
    <parent link="link_camSensor"/>
    <child link="link_camFocale"/>
  </joint>
  <link name="link_camFocale">
  </link>
  <!-- Definition of the camera as a sensor inside gazebo -->
  <gazebo reference="link_camSensor">
    <sensor name="camera1" type="camera">
      <pose> 0 0 0 0 0 0 </pose>
      <!-- Can be turned to true in order to activate vizualisation in gazebo -->
      <visualize>false</visualize>
      <update_rate>10</update_rate>
      <camera name="head">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>800</width>
          <height>800</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>10</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <!-- Definition of the gazebo plugin to be used to simulmate the camera interfaces -->
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <frameName>link_camFocale</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <!-- ROBOT PLUGIN -->
  <ros2_control name="SpacelabRobotPositionningSystem" type="system">
    <hardware>
      <plugin>isaacsim_rviz_training/DOF6BOTSystem</plugin>
      <!-- <plugin>hardware_interface/JointCommandInterface</plugin> -->
    </hardware>
    <joint name="joint_1_2">
      <!-- Definition of the command interface-->
      <command_interface name="position">
        <param name="min">{-2*pi}</param>
        <param name="max">{2*pi}</param>
      </command_interface>
      <!-- Definition of the state interfaces-->
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_2_3">
      <command_interface name="position">
        <param name="min">{-2*pi}</param>
        <param name="max">{2*pi}</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_3_4">
      <command_interface name="position">
        <param name="min">{-2*pi}</param>
        <param name="max">{2*pi}</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_4_5">
      <command_interface name="position">
        <param name="min">{-2*pi}</param>
        <param name="max">{2*pi}</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_5_6">
      <command_interface name="position">
        <param name="min">{-2*pi}</param>
        <param name="max">{2*pi}</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_6_7">
      <command_interface name="position">
        <param name="min">{-2*pi}</param>
        <param name="max">{2*pi}</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_EE_Lgripper">
      <command_interface name="position">
        <param name="min">-0.02</param>
        <param name="max">0.0</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="joint_EE_Rgripper">
      <command_interface name="position">
        <param name="min">0.0</param>
        <param name="max">0.02</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <!-- Force & Torque Sensor definition -->
    <sensor name="tcp_fts_sensor">
      <state_interface name="force.x"/>
      <state_interface name="force.y"/>
      <state_interface name="force.z"/>
      <state_interface name="torque.x"/>
      <state_interface name="torque.y"/>
      <state_interface name="torque.z"/>
    </sensor>
  </ros2_control>
</robot>
